.hljs {
  padding: 1em;
}

/* ---------首页自定义样式--------- */
/* 定义 CSS 变量，便于统一管理和修改主题样式 */
:root {
  --primary-text-color: #eee; /* 调整文字颜色为浅色，以便在深色背景上显示 */
  --secondary-text-color: #ccc; /* 次要文字颜色，用于落款等 */
  --container-bg-color: rgba(255, 255, 255, 0.85); /* （此变量现在可能不再直接用于诗词背景） */
  --container-border-color: #ccc; /* （此变量现在可能不再直接用于诗词背景） */
  --container-shadow-color: rgba(0, 0, 0, 0.15); /* （此变量现在可能不再直接用于诗词背景） */
  --border-radius-large: 12px;
  --spacing-medium: 2em;
  --spacing-large: 3em;
  --font-poem: "KaiTi", "楷体", "STKaiti", "KaiTi_GB2312", serif; /* 诗词主字体，首选楷体 */
  --font-base: 'Inter', sans-serif; /* 基础字体，可用于网站其他部分 */
  --poem-font-size-desktop: 1.25rem; /* 桌面端诗词字体大小 */
  --poem-line-height-desktop: 1.7; /* 桌面端诗词行高 */
  --poem-font-size-mobile: 1.1rem; /* 手机端诗词字体大小 */
  --poem-line-height-mobile: 1.6; /* 手机端行高 */
  --petal-width: 15px; /* 定义花瓣宽度变量 */
  --petal-height: 20px; /* 定义花瓣高度变量 */
}

body {
  font-family: var(--font-base); /* 应用基础字体 */
  color: var(--primary-text-color); /* 设置 body 的默认文字颜色 */
}

/* === 修改：诗词文本容器样式，移除卡片效果 === */
/* 诗词文本容器样式 */
.poem-text-container {
  max-width: 700px;
  margin: 5vh auto; /* 调整上下外边距，使其在页面中部 */
  padding: var(--spacing-medium) var(--spacing-large); /* 内部边距 */
  color: var(--primary-text-color); /* 诗词文本颜色 */
  position: relative; /* 确保创建堆叠上下文 */
  z-index: 1; /* 确保诗词文本在最上层，位于背景图和效果层之上 */
  animation: fadeInText 3s ease forwards;
  text-align: center; /* 居中显示诗歌文本 */
  /* white-space: pre-wrap; 从这里移除，移到 .poem-content */
}

/* === 新增/修改：应用于 <pre class="poem-content"> 的样式 === */
.poem-text-container .poem-content {
  font-family: var(--font-poem) !important; /* <--- 在这里添加 !important */
  font-size: var(--poem-font-size-desktop); /* 应用桌面端字体大小 */
  line-height: var(--poem-line-height-desktop); /* 应用桌面端行高 */
  white-space: pre-wrap; /* 保留空白和换行 */
  /* 可以移除 <pre> 默认的 margin-top/bottom 如果你发现有多余的空白 */
  margin-top: 0;
  margin-bottom: 0;
}
/* 诗词落款样式 (选择器更新为 .poem-text-container .author-signature) */
.poem-text-container .author-signature {
  display: block;
  text-align: right;
  margin-top: 1.5em;
  font-size: 0.9em;
  color: var(--secondary-text-color);
  font-style: normal;
  letter-spacing: 0.05em;
}

/* 渐显动画 */
@keyframes fadeInText {
  0% { opacity: 0; transform: translateY(20px);}
  100% { opacity: 1; transform: translateY(0);}
}

/* 背景水墨画统一样式 */
.poem-bg {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: no-repeat center center;
  background-size: cover;
  filter: grayscale(100%) contrast(0.85) brightness(0.95);
  opacity: 0.5;
  z-index: -2; /* 放在最底层 */
  transform: translate3d(0, 0, 0);
  transition: transform 0.1s ease-out;
}

/* 媒体查询保持不变，加载不同尺寸背景图 */
/* PC桌面版 */
@media (min-width: 1025px) {
  .poem-bg { background-image: url('/img/sushi-desktop.png'); }
}
/* 平板版 */
@media (min-width: 768px) and (max-width: 1024px) {
  .poem-bg { background-image: url('/img/sushi-tablet.png'); }
}
/* 手机版 */
@media (max-width: 767px) {
  .poem-bg { background-image: url('/img/sushi-mobile.png'); }
  .poem-text-container .poem-content { /* 注意：这里是 .poem-text-container .poem-content */
    font-size: var(--poem-font-size-mobile);
    line-height: var(--poem-line-height-mobile);
  }
  .poem-text-container { /* 手机版容器内边距 */
    padding: 1.5em 2em;
  }
}

/* --- 月光江波效果的样式 --- */
.effect-layer { /* 保持这个基础样式 */
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
}

#moonRiverContainer {
  /* 确保 z-index 在背景图之上，在诗词文本之下 */
  z-index: -1; 
}

div#moon { /* 提高优先级，确保样式生效 */
  position: absolute;
  top: 10vh; /* 初始位置：页面顶部 10% 的高度 */
  left: 50vw; /* 初始位置：水平居中 */
  width: 80px; /* 确保宽度 */
  height: 80px; /* 确保高度 */
  border-radius: 50%; /* 圆形 */
  background-color: rgba(255, 255, 220, 0.8); /* 柔和的月光颜色 */
  box-shadow: 0 0 40px 20px rgba(255, 255, 220, 0.6); /* 初始光晕 */
  transform: translate(-50%, -50%); /* 居中 */
}

/* 关键：月光光晕动画 */
@keyframes moonGlow {
  0% { box-shadow: 0 0 40px 20px rgba(255, 255, 220, 0.6); }
  50% { box-shadow: 0 0 60px 30px rgba(255, 255, 220, 0.4); } /* 光晕扩散，变淡 */
  100% { box-shadow: 0 0 40px 20px rgba(255, 255, 220, 0.6); }
}
div#moon { /* 动画应用到 #moon 元素 */
  animation: moonGlow 5s infinite alternate; 
}


/* === 关键：riverCanvas 的新样式和定位 === */
#riverCanvas {
  position: absolute; /* 相对于其父容器 moonRiverContainer 定位 */
  top: 40vh; /* 从视口高度的 40% 处开始 */
  left: 0;
  width: 100vw; /* 占据整个视口宽度 */
  height: 60vh; /* 占据视口底部 60% 的高度作为江面 */
  /* background-color: rgba(0, 0, 0, 0.6) !important; /* 临时背景色，调试用，调试完成后请删除或注释 */
  z-index: 0; /* 确保 Canvas 在 moonRiverContainer 内部的正确层级，高于 moon */
}
